{
  "version": 3,
  "file": "bundle.css",
  "sources": [
    "App.svelte"
  ],
  "sourcesContent": [
    "<script>\n  export let name;\n  import { onMount } from \"svelte\";\n  let messageInput;\n  let messages = [];\n  let inputText = \"\";\n\n  onMount(() => {\n    messageInput.focus();\n  });\n\n  let counter = 0;\n  let numUsers = 0;\n  const ws = new WebSocket(\"ws://127.0.0.1:6789\");\n\n  ws.onopen = function () {\n    console.log(\"Websocket client connected\");\n  };\n\n  ws.onmessage = function (e) {\n    let data = JSON.parse(e.data);\n    if (data.type == \"msg\") {\n      console.log(\"Received: \" + data.texto);\n      if (data.texto.slice(0,2) == \"* \"){\n        messages = [...messages, data.texto.slice(2)];\n      } else {\n        messages = [...messages, \"Recebido: \" + data.texto];\n      }\n      inputText = \"\";\n    } else if (data.type == \"users\") {\n      numUsers = data.count;\n    } else {\n      console.error(\"unsupported event\", data);\n    }\n  };\n  \n  function handleClick() {\n    messages = [...messages, \"Enviado: \" + inputText];\n    ws.send(JSON.stringify({ msg: inputText }));\n    inputText = \"\";\n  }\n\n\n</script>\n\n<style>\n  * {\n    box-sizing: border-box;\n  }\n\n  main {\n    text-align: center;\n    padding: 1em;\n    max-width: 240px;\n    margin: 0 auto;\n  }\n\n  h1 {\n    color: #1c33fa;\n    text-transform: none;\n    font-size: 3em;\n    font-weight: 100;\n    margin: 0 auto;\n  }\n\n  .state {\n    color: #00bd00;\n    font-size: 1.5em;\n  }\n\n  @media (min-width: 640px) {\n    main {\n      max-width: none;\n    }\n  }\n\n  .chatbox {\n    width: 100%;\n    height: 59vh;\n    padding: 0 1em;\n    text-align: left;\n    background-color: #eee;\n    overflow-y: scroll;\n    overscroll-behavior-y: contain;\n    scroll-snap-type: y proximity;\n  }\n\n  .chatbox p {\n    margin-top: 0.3em;\n    margin-bottom: 0;\n    padding-bottom: 0.3em;\n  }\n\n  .chatbox > p:last-child {\n    scroll-snap-align: end;\n  }\n\n  .inputbox {\n    display: flex;\n    margin-top: 0.5em;\n  }\n\n  .inputbox input {\n    flex-grow: 1;\n  }\n</style>\n\n<main>\n  <h1><b>{name}</b></h1>\n  <p>\n    PMR3412: Redes Industriais (2020) - Entrega 2<br>\n    Exerc√≠cio 2: Sala de Bate Papo com WebSockets<br>\n    Autor: Pedro Orii Antonacio - nUSP 10333504\n  </p>\n\n  <div class=\"state\">\n    <span class=\"users\">{numUsers} {numUsers > 1 ? 'users' : 'user'}</span>\n    online<br>\n  </div>\n\n  <p>\n  </p>\n\n  <div class=\"chatbox\">\n    {#each messages as message}\n      <p>{message}</p>\n    {/each}\n  </div>\n  <form class=\"inputbox\">\n    <input type=\"text\" bind:this={messageInput} bind:value={inputText} />\n    <button type=\"submit\" on:click|preventDefault={handleClick}>Send</button>\n  </form>\n</main>\n"
  ],
  "names": [],
  "mappings": "AA8CE,4BAAE,CAAC,AACD,UAAU,CAAE,UAAU,AACxB,CAAC,AAED,IAAI,4BAAC,CAAC,AACJ,UAAU,CAAE,MAAM,CAClB,OAAO,CAAE,GAAG,CACZ,SAAS,CAAE,KAAK,CAChB,MAAM,CAAE,CAAC,CAAC,IAAI,AAChB,CAAC,AAED,EAAE,4BAAC,CAAC,AACF,KAAK,CAAE,OAAO,CACd,cAAc,CAAE,IAAI,CACpB,SAAS,CAAE,GAAG,CACd,WAAW,CAAE,GAAG,CAChB,MAAM,CAAE,CAAC,CAAC,IAAI,AAChB,CAAC,AAED,MAAM,4BAAC,CAAC,AACN,KAAK,CAAE,OAAO,CACd,SAAS,CAAE,KAAK,AAClB,CAAC,AAED,MAAM,AAAC,YAAY,KAAK,CAAC,AAAC,CAAC,AACzB,IAAI,4BAAC,CAAC,AACJ,SAAS,CAAE,IAAI,AACjB,CAAC,AACH,CAAC,AAED,QAAQ,4BAAC,CAAC,AACR,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,CACZ,OAAO,CAAE,CAAC,CAAC,GAAG,CACd,UAAU,CAAE,IAAI,CAChB,gBAAgB,CAAE,IAAI,CACtB,UAAU,CAAE,MAAM,CAClB,qBAAqB,CAAE,OAAO,CAC9B,gBAAgB,CAAE,CAAC,CAAC,SAAS,AAC/B,CAAC,AAED,sBAAQ,CAAC,CAAC,cAAC,CAAC,AACV,UAAU,CAAE,KAAK,CACjB,aAAa,CAAE,CAAC,CAChB,cAAc,CAAE,KAAK,AACvB,CAAC,AAED,sBAAQ,CAAG,eAAC,WAAW,AAAC,CAAC,AACvB,iBAAiB,CAAE,GAAG,AACxB,CAAC,AAED,SAAS,4BAAC,CAAC,AACT,OAAO,CAAE,IAAI,CACb,UAAU,CAAE,KAAK,AACnB,CAAC,AAED,uBAAS,CAAC,KAAK,cAAC,CAAC,AACf,SAAS,CAAE,CAAC,AACd,CAAC"
}